# SOL Basis Trading Bot Configuration
# =====================================

# Network Configuration
rpc:
  primary_url: "https://api.mainnet-beta.solana.com"
  fallback_urls:
    - "https://solana-api.projectserum.com"
    - "https://rpc.ankr.com/solana"
  ws_url: "wss://api.mainnet-beta.solana.com"
  connection_timeout_ms: 5000
  request_timeout_ms: 10000
  max_retries: 3
  requests_per_second: 50

# Wallet Configuration
wallet:
  keypair_path: "./wallet.json"

# Trading Parameters
trading:
  min_basis_spread_pct: 0.10
  min_funding_apr_pct: 15.0
  max_leverage: 3.0
  max_position_size_sol: 1000.0
  max_total_exposure_usd: 100000.0
  slippage_tolerance_pct: 0.50
  basis_close_threshold_pct: 0.05
  max_hold_time_hours: 168

# Risk Management
risk:
  max_drawdown_pct: 5.0
  stop_loss_pct: 2.0
  hedge_drift_threshold_pct: 2.0
  max_funding_reversal_loss: 500.0
  max_open_positions: 5
  min_trade_interval_secs: 60

# Rebalancing Configuration
rebalance:
  check_interval_secs: 60
  min_rebalance_size_sol: 10.0
  max_rebalances_per_hour: 10

# Execution Configuration
execution:
  use_jito: true
  jito_tip_lamports: 10000
  jito_block_engine_url: "https://mainnet.block-engine.jito.wtf"
  max_retries: 3
  retry_delay_ms: 100
  simulate_before_submit: true
  priority_fee:
    strategy: "dynamic"
    fixed_fee: 1000
    max_fee: 100000

# Telemetry & Logging
telemetry:
  log_level: "info"
  json_logs: false
  log_file: null
  metrics_port: 9090
  enable_metrics: true
  enable_alerts: true
  alert_webhook: null
  telegram:
    enabled: false
    bot_token: null
    chat_id: null

# Protocol Addresses (Mainnet)
protocols:
  drift:
    program_id: "dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH"
    market_index: 0
  pyth:
    sol_usd_feed: "H6ARHf6YXhGYeQfUzQNGk6rDNnLBQKrenN712K4AQJEG"
  jupiter:
    api_url: "https://quote-api.jup.ag/v6"
    sol_mint: "So11111111111111111111111111111111111111112"
    usdc_mint: "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"

# =====================================
# AGENTIC FEATURES (Self-Learning)
# =====================================
agentic:
  # Enable adaptive position sizing based on historical performance
  # Uses Kelly criterion adjusted by win rate and profit factor
  enable_adaptive_sizing: true
  
  # Enable funding reversal detection
  # Early warning system for funding rate reversals
  enable_reversal_detection: true
  
  # Enable performance tracking/learning
  # Stores all trades in database for analysis
  enable_performance_tracking: true
  
  # Path to performance database (JSON file)
  performance_db_path: "data/performance.json"
  
  # Minimum number of trades before adaptive sizing starts
  # Before this threshold, uses conservative 10% Kelly
  min_trades_for_adaptation: 10
  
  # Maximum Kelly fraction (safety cap)
  # Even with 100% win rate, never bet more than this
  max_kelly_fraction: 0.25
  
  # Use half-Kelly for extra safety (recommended)
  use_half_kelly: true
  
  # Minimum position size multiplier during drawdown
  # Even during bad streaks, size won't go below this % of calculated
  min_position_multiplier: 0.2
  
  # Cooldown between reversal alerts (seconds)
  reversal_alert_cooldown_secs: 300
  
  # Force close position on critical funding reversal
  force_close_on_critical_reversal: true
  
  # Auto-export trades to CSV (for analysis)
  auto_export_trades: false
  csv_export_path: "data/trades.csv"

# Paper Trading Mode (RECOMMENDED FOR TESTING)
paper_trading: true

# Devnet Mode
devnet: false
